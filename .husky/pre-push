# =============================================================================
# PRE-PUSH VALIDATION
# =============================================================================

# =============================================================================
# PROJECT BUILD VALIDATION
# =============================================================================
echo "# ============================================================================="
echo "# üöÄ BUILDING PROJECT..."
echo "# ============================================================================="

if ! bun run build; then
  echo ""
  echo "# ============================================================================="
  echo "# ‚ùå BUILD FAILED"
  echo "# ============================================================================="
  echo "# Fix build errors before pushing"
  echo ""
  exit 1
fi

echo ""
echo "# ============================================================================="
echo "# ‚úÖ BUILD PASSED"
echo "# ============================================================================="

# =============================================================================
# GIT FETCH + REBASE VALIDATION
# =============================================================================
echo "# ============================================================================="
echo "# üîÑ FETCHING LATEST CHANGES AND REBASING..."
echo "# ============================================================================="

if ! git pull --rebase; then
  echo ""
  echo "# ============================================================================="
  echo "# ‚ùå GIT REBASE FAILED"
  echo "# ============================================================================="
  echo "# Resolve conflicts and try pushing again"
  echo ""
  exit 1
fi

echo ""
echo "# ============================================================================="
echo "# ‚úÖ GIT REBASE SUCCESSFUL"
echo "# ============================================================================="

# =============================================================================
# ALL CHECKS PASSED
# =============================================================================
echo ""
echo "# ============================================================================="
echo "# üéâ ALL PRE-PUSH CHECKS PASSED"
echo "# ============================================================================="
